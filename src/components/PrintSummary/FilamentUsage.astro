---
import type { GCodeFile } from '../../types/gcode';
import { calculateFilamentUsage, generateFilamentDisplayHTML } from '../../utils/filament-calculator';

interface Props {
  files: readonly GCodeFile[];
  settings: {
    display: {
      hideEmptyFilaments: boolean;
      showTotalCost: boolean;
      compactMode: boolean;
    };
  };
}

const { files, settings } = Astro.props;
const usageData = calculateFilamentUsage(files, settings);
---

<div class="space-y-2 mt-4" id="total-usage" set:html={generateFilamentDisplayHTML(usageData, settings)} />
